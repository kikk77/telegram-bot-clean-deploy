# Railway Stagingç¯å¢ƒé…ç½®
# 
# ğŸ§ª æµ‹è¯•ç¯å¢ƒBoté…ç½®è¯´æ˜ï¼š
# åœ¨Railway Variablesä¸­è®¾ç½®ä»¥ä¸‹å˜é‡ï¼š
# BOT_TOKEN=ä½ çš„æµ‹è¯•Bot Token
# BOT_USERNAME=xiaoji_daniao_bot (æµ‹è¯•Botç”¨æˆ·å)
# GROUP_CHAT_ID=-1002793326688 (æµ‹è¯•ç¾¤ç»„ID)
# NODE_ENV=staging
# ADMIN_PASSWORD=ä½ çš„ç®¡ç†å‘˜å¯†ç 
#
# âš ï¸ é‡è¦ï¼šç¡®ä¿ï¼š
# 1. æµ‹è¯•Botå·²æ·»åŠ åˆ°æµ‹è¯•ç¾¤ç»„
# 2. æµ‹è¯•Botå·²è·å¾—ç¾¤ç»„ç®¡ç†å‘˜æƒé™
# 3. ä¸ç”Ÿäº§ç¯å¢ƒå®Œå…¨éš”ç¦»

[build]
builder = "nixpacks"
watchPatterns = ["app.js", "services/**", "models/**", "config/**"]
buildCommand = "npm install"

[deploy]
startCommand = "npm run railway"
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# Volumeé…ç½® - æµ‹è¯•ç¯å¢ƒç‹¬ç«‹æ•°æ®æŒä¹…åŒ–
[[deploy.volumes]]
mountPath = "/app/data"
name = "telegram-bot-staging-data"  # ç‹¬ç«‹çš„staging volume

[env]
NODE_ENV = "staging"
PORT = "3000"

[[ports]]
port = 3000
internal = false 

[[ports]]
port = 3001
internal = false

[variables]
PORT_HEALTH = "3001" 